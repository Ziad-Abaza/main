import{M as x,N as y,H as z,b,u as Q,m as c,I as q,p as l,o as i,q as r,v as d,s as A,x as _,A as k,B as C,G as I}from"./app-CwzL3_Sr.js";const R=x("courseQuizResultsStore",{state:()=>({courseId:null,courseTitle:"",quizId:null,quizTitle:"",totalQuestions:0,score:0,percentage:0,attempts:[],groupedAttempts:{},loading:!1,error:null}),getters:{passed:t=>t.percentage>=70,scorePercentage:t=>t.percentage,getAttemptsByQuestionId:t=>p=>t.groupedAttempts[p]||[]},actions:{async fetchQuizResults(t){var m,o;this.loading=!0,this.error=null;const p=y();try{const e=(await z.get(`/api/quizzes/course/${t}/quiz-results`,{headers:{Authorization:`Bearer ${p.token}`,Accept:"application/json","Content-Type":"application/json"}})).data.data;this.courseId=t,this.totalQuestions=e.total_questions,this.score=e.score,this.percentage=e.percentage,this.attempts=[...e.attempts||[]];const n={};(e.attempts||[]).forEach(u=>{n[u.question_id]||(n[u.question_id]=[]),n[u.question_id].push(u)}),this.groupedAttempts=n}catch(a){throw console.error("Error fetching course quiz results:",a),this.error=((o=(m=a.response)==null?void 0:m.data)==null?void 0:o.message)||"Failed to load course quiz results.",a}finally{this.loading=!1}}}}),S={class:"max-w-2xl mx-auto py-8"},B={key:0,class:"text-gray-400"},w={key:1,class:"text-red-500"},N={key:2},T={class:"mb-4"},E={class:"mb-4"},F={key:0},V={__name:"CourseQuizResults",setup(t){const m=Q().params.courseId,o=R(),a=c(!0),e=c(null),n=c(0),u=c(0),h=c(0),v=c([]);return q(async()=>{a.value=!0,e.value=null;try{await o.fetchQuizResults(m),n.value=o.score,u.value=o.totalQuestions,h.value=o.percentage,v.value=o.attempts}catch{e.value=o.error||"Failed to load results."}finally{a.value=!1}}),(f,s)=>(i(),l("div",S,[s[4]||(s[4]=r("h1",{class:"text-3xl font-bold mb-6"},"Course Quiz Results",-1)),a.value?(i(),l("div",B,"Loading results...")):e.value?(i(),l("div",w,d(e.value),1)):(i(),l("div",N,[r("div",T,[s[0]||(s[0]=r("span",{class:"font-semibold"},"Score:",-1)),_(" "+d(n.value)+" / "+d(u.value),1)]),r("div",E,[s[1]||(s[1]=r("span",{class:"font-semibold"},"Percentage:",-1)),_(" "+d(h.value)+"% ",1)]),v.value.length?(i(),l("div",F,[s[3]||(s[3]=r("h2",{class:"text-xl font-semibold mb-2"},"Your Answers",-1)),r("ul",null,[(i(!0),l(k,null,C(v.value,g=>(i(),l("li",{key:g.attempt_id,class:"mb-2"},[s[2]||(s[2]=r("span",{class:"font-semibold"},"Q:",-1)),_(" "+d(g.question_id)+" - ",1),r("span",{class:I(g.is_correct?"text-green-400":"text-red-400")},d(g.is_correct?"Correct":"Incorrect"),3)]))),128))])])):A("",!0)]))]))}},L=b(V,[["__scopeId","data-v-4bde4b12"]]);export{L as default};
